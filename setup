#!/bin/zsh

# packages
sudo apt-get install -y \
  bat \
  fzf \
  htop \
  neovim \
  silversearcher-ag

# starship
sudo sh -c "$(curl -fsSL https://starship.rs/install.sh)" -- --force
ln -sf ~/dotfiles/starship ~/.config/starship.toml

# vim
sudo sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
mkdir -p ~/.config/nvim
ln -sf ~/dotfiles/nvim ~/.config/nvim/init.vim
ln -sf ~/.vimrc                  ~/.config/nvim/init.vim
nvim -es -u ~/.config/init.vim -i NONE -c "PlugInstall" -c "qa"

# tmux
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
ln -s ~/dotfiles/tmux ~/.tmux.conf

# shell
if [[ -z "$(grep ~/dotfiles/shell ~/.zshrc)" ]]; then
  echo "source ~/dotfiles/shell" >> ~/.zshrc
fi

exec $SHELL
